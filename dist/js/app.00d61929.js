(function(){"use strict";var t={6485:function(t,e,s){var i=s(8935),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[!0===t.isLogin?s("todo-app",{on:{backToLogin:t.backToLogin}}):s("login-app",{on:{login:t.login}})],1)},a=[],n=s(6166),r=s.n(n),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",{staticClass:"text-center"},[t._v("TodoList")]),s("todo-button",{attrs:{placeholder:"代辦事項",buttonText:"新增",isEdit:!1,newTask:""},on:{submit:t.submitTask}}),s("todo-items",{attrs:{tasks:t.todos,editIndex:t.editIndex},on:{editTasks:t.editTasks,deleteTask:t.deleteTask,checkTask:t.checkTask,submitTask:t.submitTask,submitEditTask:t.submitEditTask}})],1)},d=[],u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table"},[s("thead",[t._m(0),t._l(t.tasks,(function(e,i){return s("todo-item",{key:i,attrs:{index:i,task:e,taskName:t.tasks[i].name,isEditing:i===t.editIndex},on:{editTasks:t.editTasks,deleteTask:t.deleteTask,checkTask:t.checkTask,submitTask:t.submitTask,submitEditTask:t.submitEditTask}})}))],2),s("tbody")])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{attrs:{scope:"col"}},[t._v("#")]),s("th",{attrs:{scope:"col"}},[t._v("事項")]),s("th",{attrs:{scope:"col"}},[t._v("狀態")]),s("th",{attrs:{scope:"col"}},[t._v("刪除")]),s("th",{attrs:{scope:"col"}},[t._v("修改")]),s("th",{attrs:{scope:"col"}},[t._v("完成")])])}],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v(t._s(t.index))]),t.isEditing?s("td",{attrs:{scope:"row"}},[s("todo-button",{attrs:{placeholder:"代辦事項",buttonText:"確認更改",initValue:t.task.name},on:{submit:t.submitEditTask}})],1):s("td",{attrs:{scope:"row"}},[t._v(t._s(t.task.name))]),s("td",{class:{"text-danger":t.task.isComplete,"text-success":!t.task.isComplete}},[t._v(" "+t._s(t.task.isComplete?"完成":"進行中")+" ")]),s("td",[s("button",{staticClass:"text-center",on:{click:function(e){return t.deleteTask(t.index)}}},[s("i",{staticClass:"fa-regular fa-trash-can"})])]),s("td",[s("button",{staticClass:"text-center",on:{click:function(e){return t.editTasks(t.index)}}},[s("i",{staticClass:"fa-regular fa-pen-to-square"})])]),s("td",[s("label",{staticClass:"form-check-label",attrs:{for:"checkInput"+t.index}},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"checkInput"+t.index},domProps:{checked:t.task.isComplete},on:{change:function(e){return t.checkTask(t.index)}}})])])])},m=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex"},[s("label",{attrs:{for:"inputTask"}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputText,expression:"inputText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"inputTask",placeholder:t.placeholder},domProps:{value:t.inputText},on:{input:function(e){e.target.composing||(t.inputText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("button",{staticClass:"btn btn-warning rounded-20",on:{click:t.submit}},[t._v(t._s(t.buttonText))])])},k=[],f={props:{placeholder:String,buttonText:String,initValue:String},data(){return{inputText:this.initValue}},methods:{submit(){const{inputText:t}=this;0!==t.length&&this.$emit("submit",this.inputText)}}},g=f,T=s(1001),b=(0,T.Z)(g,h,k,!1,null,"bafe3ffc",null),v=b.exports,x={components:{TodoButton:v},props:{index:Number,isEditing:Boolean,task:Object},methods:{editTasks(t){this.$emit("editTasks",t)},deleteTask(t){this.$emit("deleteTask",t)},submitEditTask(t){this.$emit("submitEditTask",t)},checkTask(t){this.$emit("checkTask",t)}}},_=x,C=(0,T.Z)(_,p,m,!1,null,"a844b36a",null),w=C.exports,y={props:{tasks:Array,editIndex:Number},components:{TodoItem:w},methods:{editTasks(t){this.$emit("editTasks",t)},deleteTask(t){this.$emit("deleteTask",t)},submitTask(t){this.$emit("submitTask",t)},submitEditTask(t){this.$emit("submitEditTask",t)},checkTask(t){this.$emit("checkTask",t)}}},L=y,$=(0,T.Z)(L,u,l,!1,null,"49b66cf2",null),E=$.exports;r().defaults.baseURL="/api";var I={components:{TodoItems:E,TodoButton:v},name:"HelloWorld",props:{msg:String},data(){return{newTask:"",editIndex:-1,checked:!1,tasks:[{name:"洗衣服",isComplete:!0},{name:"修理郵筒",isComplete:!1},{name:"倒垃圾",isComplete:!1}],todos:[]}},created(){this.getTodos(),console.log(this.todos)},methods:{backToLogin(){this.$emit("backToLogin")},async getTodos(){const t=await r().get("/todos");this.todos=t.data.todos},async getTodo(t){const e=await r().get(`/todos/${t}`);return e.data.todo},async submitTask(t){this.tasks.push({name:t,isComplete:!1});const e=await r().post("/todos",{name:t},{headers:{"Content-Type":"application/json; charset=utf-8"}});console.log(e.data),"login error"===e.data.error_code&&this.backToLogin(),this.todos=e.data.todos},async deleteTask(t){const{id:e}=this.todos[t],s=await r()["delete"](`/todos/${e}`);"login error"===s.data.error_code&&this.backToLogin(),this.todos=s.data.todos},editTasks(t){this.editIndex=t,this.editTask=this.tasks[t].name},async submitEditTask(t){this.tasks[this.editIndex].name=t;const{id:e}=this.todos[this.editIndex],s=await r().put(`/todos/${e}`,{name:t,isComplete:!1},{headers:{"Content-Type":"application/json; charset=utf-8"}});"login error"===s.data.error_code&&this.backToLogin(),this.todos=s.data.todos,this.editIndex=-1},async checkTask(t){this.tasks[t].isComplete=!this.tasks[t].isComplete;const{id:e}=this.todos[t],{name:s}=this.todos[t],i=await r().put(`/todos/${e}`,{name:s,isComplete:!1},{headers:{"Content-Type":"application/json; charset=utf-8"}});"login error"===i.data.error_code&&this.backToLogin(),this.todos=i.data.todos}}},O=I,j=(0,T.Z)(O,c,d,!1,null,"2091d55e",null),Z=j.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-red-300 d-flex flex-column justify-content-center align-items-center loginApp w-25 m-auto"},[s("div",{staticClass:"input-group mb-3"},[s("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-default"}},[t._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),s("div",{staticClass:"input-group mb-3"},[s("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-default"}},[t._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.login}},[t._v("登入")])])},N=[],P={data(){return{account:null,password:null}},methods:{login(){this.$emit("login",this.account,this.password)}}},S=P,A=(0,T.Z)(S,z,N,!1,null,"378ba42a",null),G=A.exports,U={components:{LoginApp:G,TodoApp:Z},name:"App",data(){return{isLogin:!1}},mounted(){this.isLogin=this.getLogin()},methods:{async getLogin(){r().defaults.baseURL="/api";const t=await r().get("/login");this.isLogin=t.data.isLogin},async login(t,e){r().defaults.baseURL="/api";const s=await r().post("/login",{account:t,password:e});this.isLogin=s.data.isLogin,this.isLogin||alert("帳號密碼錯誤")},backToLogin(){this.isLogin=!1}}},B=U,R=(0,T.Z)(B,o,a,!1,null,null,null),V=R.exports;i.Z.config.productionTip=!1,new i.Z({el:"#app",render:t=>t(V)}).$mount("#app")}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,a){if(!i){var n=1/0;for(u=0;u<t.length;u++){i=t[u][0],o=t[u][1],a=t[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&a||n>=a)&&Object.keys(s.O).every((function(t){return s.O[t](i[c])}))?i.splice(c--,1):(r=!1,a<n&&(n=a));if(r){t.splice(u--,1);var d=o();void 0!==d&&(e=d)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,o,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,a,n=i[0],r=i[1],c=i[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(c)var u=c(s)}for(e&&e(i);d<n.length;d++)a=n[d],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(u)},i=self["webpackChunktodo_list"]=self["webpackChunktodo_list"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(6485)}));i=s.O(i)})();
//# sourceMappingURL=app.00d61929.js.map